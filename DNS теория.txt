https://habr.com/ru/post/137587/
Основная цель DNS — это отображение доменных имен в IP-адреса и наоборот — IP в DNS. 
Решено было рассмотреть BIND (Berkeley Internet Name Domain, ранее Berkeley Internet Name Daemon), 
как самый распространенный софт для решения задачи DNS. BIND входит в состав любого дистрибутива UNIX. 
Основу BIND составляет демон named, который для своей работы использует порт UDP/53 и для части запросов TCP/53.
Очень подробно о нем рассказано в статье на Хабре (https://habrahabr.ru/post/137587/). 
В двух словах: версия 9 была последней, с 10-й версии права передают сообществу, и это ПО ныне известно как Bundy.

Запись ресурса состоит из следующих полей:

	имя (NAME) — доменное имя, к которому привязана или которому «принадлежит» данная ресурсная запись, либо IP адрес. При отсутствии данного поля, запись ресурса наследуется от предыдущей записи.
	Time To Live (TTL) — дословно «время жизни» записи, время хранения записи в кэше DNS (после указанного времени запись удаляется), данное поле может не указываться в индивидуальных записях ресурсов, но тогда оно должно быть указано в начале файла зоны и будет наследоваться всеми записями.
	класс (CLASS) — определяет тип сети, (в 99,99% случаях используется IN (что обозначает — Internet). Данное поле было создано из предположения, что DNS может работать и в других типах сетей, кроме TCP/IP)
	тип (TYPE) — тип записи синтаксис и назначение записи
	данные (DATA) — различная информация, формат и синтаксис которой определяется типом.

	k-max.name.             86400   IN      A       81.177.139.65
	
Запросы DNS на картинке ниже хорошо показаны

https://habrastorage.org/getpro/habr/post_images/ef9/491/ddc/ef9491ddc02ccb5997011c3ce8d568f7.png

Обычно, количество шагов сокращено до минимума, т.к. на пути прохождения запросов встречается кэширующий сервер, который хранит необходимую информацию в кэше. 

Ответы DNS сервера
	Ответы DNS бывают следующего типа:
		Авторитативный ответ (authoritative response) приходит от серверов, являющихся ответственными за зону.
		Неавторитативный ответ (non authoritative response) приходит от серверов, которые не отвечают за зону (от кэширующих).
		
	Ответ DNS обычно содержит следующую информацию:
		Запись заголовка — служебную информацию о запросе.
		Запись запроса — повторяет отправленный запрос.
		Запись ответа — собственно, сам ответ.
		Записи авторитетных серверов — информацию об авторитетных серверах, хранящих информацию по текущему запросу.
		Дополнительную информацию — дополнительные записи, например адреса NS-серверов.
	
	Вышенаписанное наглядно подтверждается утилитой dig:
	
		root@DNS:~# dig ya.ru
		; <<>> DiG 9.7.3 <<>> ya.ru (раздел заголовка)
		;; global options: +cmd
		;; Got answer:
		;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 53499
		;; flags: qr rd ra; QUERY: 1, ANSWER: 7, AUTHORITY: 2, ADDITIONAL: 3

		;; QUESTION SECTION: (раздел запроса)
		;ya.ru.                         IN      A

		;; ANSWER SECTION: (раздел ответа)
		ya.ru.                  4813    IN      A       87.250.250.203
		ya.ru.                  4813    IN      A       87.250.251.3
		ya.ru.                  4813    IN      A       93.158.134.3
		ya.ru.                  4813    IN      A       93.158.134.203
		ya.ru.                  4813    IN      A       213.180.204.3
		ya.ru.                  4813    IN      A       77.88.21.3
		ya.ru.                  4813    IN      A       87.250.250.3

		;; AUTHORITY SECTION: (авторитативные сервера)
		ya.ru.                  4813    IN      NS      ns1.yandex.ru.
		ya.ru.                  4813    IN      NS      ns5.yandex.ru.

		;; ADDITIONAL SECTION: (дополнительная информация - адреса авторитативных name servers)
		ns5.yandex.ru.          345565  IN      A       213.180.204.1
		ns1.yandex.ru.          345565  IN      A       213.180.193.1
		ns1.yandex.ru.          3565    IN      AAAA    2a02:6b8::1

		;; Query time: 7 msec
		;; SERVER: 192.168.1.1#53(192.168.1.1)
		;; WHEN: Sat Jul  2 23:02:45 2011
		;; MSG SIZE  rcvd: 238
		
	Обратное преобразование имен
	
	DNS используется в первую очередь для преобразования доменных имён в IP-адреса, но он также может выполнять обратный процесс,
	называемый Обратное преобразование имен или обратным отображением. Т.к. записи в прямой базе DNS структурированы иерархически 
	по доменным именам, DNS не может эффективно выполнять поиск по IP адресу в такой базе. Для обратного преобразования в DNS используется 
	специальный домен in-addr.arpa. 
	Ресурсные записи в данном домене в поле Name содержат IP-адреса, в поле Type — PTR, а в поле Data — FQDN-имя соответствующее данному IP.
